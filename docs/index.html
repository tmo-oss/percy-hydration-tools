<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>percy-cake-hydration-tools</title>
	<meta name="description" content="Documentation for percy-cake-hydration-tools">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">percy-cake-hydration-tools</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>percy-cake-hydration-tools</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#percival-hydration-and-json-comparison-command-line-utilities" id="percival-hydration-and-json-comparison-command-line-utilities" style="color: inherit; text-decoration: none;">
					<h2>Percival Hydration and JSON Comparison Command Line Utilities</h2>
				</a>
				<a href="#prerequisites" id="prerequisites" style="color: inherit; text-decoration: none;">
					<h2>Prerequisites</h2>
				</a>
				<ul>
					<li>Node.js 10.15.x</li>
					<li>Npm 6</li>
				</ul>
				<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
					<h2>Installation</h2>
				</a>
				<pre><code><span style="color: #001080">npm</span><span style="color: #000000"> </span><span style="color: #001080">install</span><span style="color: #000000"> </span><span style="color: #001080">percy</span><span style="color: #000000">-</span><span style="color: #001080">cake</span><span style="color: #000000">-</span><span style="color: #001080">hydration</span><span style="color: #000000">-</span><span style="color: #001080">tools</span>
</code></pre>
				<p>Or install commands globally</p>
				<pre><code><span style="color: #001080">npm</span><span style="color: #000000"> </span><span style="color: #001080">install</span><span style="color: #000000"> -</span><span style="color: #001080">g</span><span style="color: #000000"> </span><span style="color: #001080">percy</span><span style="color: #000000">-</span><span style="color: #001080">cake</span><span style="color: #000000">-</span><span style="color: #001080">hydration</span><span style="color: #000000">-</span><span style="color: #001080">tools</span>
</code></pre>
				<a href="#documentation" id="documentation" style="color: inherit; text-decoration: none;">
					<h2>Documentation</h2>
				</a>
				<p>Documentations are auto generated and can be accessed from <code>docs</code> folder.
				In order to generate docs again you can call <code>npm run docs</code> command.</p>
				<a href="#usage-in-command-line" id="usage-in-command-line" style="color: inherit; text-decoration: none;">
					<h2>Usage In Command Line</h2>
				</a>
				<a href="#compare-json" id="compare-json" style="color: inherit; text-decoration: none;">
					<h3>compare-json</h3>
				</a>
				<p>Script for comparing two json files and outputting their differences to stdout</p>
				<p><code>compare-json &lt;path/to/file.json&gt; &lt;path/to/file.json&gt;</code></p>
				<pre><code class="language-bash"><span style="color: #008000"># Example</span>
<span style="color: #000000">compare-json test/data/.percyrc test/data/modified.percyrc</span>

<span style="color: #008000"># To generate HTML report</span>
<span style="color: #000000">compare-json test/data/.percyrc test/data/modified.percyrc --out ./test/data/out/diff.html</span>

<span style="color: #008000"># to turn off/on the console color  pass --consoleColor false/true respectively</span>
<span style="color: #000000">compare-json test/data/.percyrc test/data/modified.percyrc --colorConsole=false</span>
</code></pre>
				<a href="#hydrate" id="hydrate" style="color: inherit; text-decoration: none;">
					<h3>hydrate</h3>
				</a>
				<p>Script for processing YAML configuration files and converting it to environment specific JSON configuration</p>
				<p><code>hydrate &lt; --root | --app | --file &gt; &lt;path/to/input&gt; --out &lt;path/to/output&gt;</code>
				It provides three options</p>
				<ul>
					<li><code>--root</code> <code>-r</code> for processing all apps in a root directory</li>
					<li><code>--app</code> <code>-a</code> for processing a single app directory</li>
					<li><code>--file</code> <code>-f</code> for processing a single file
					You should specify one of these three options.</li>
				</ul>
				<pre><code class="language-bash"><span style="color: #008000"># Examples</span>

<span style="color: #008000"># Process all apps</span>
<span style="color: #000000">hydrate -r test/data/apps --out test/data/out/dist</span>

<span style="color: #008000"># Process single app</span>
<span style="color: #000000">hydrate -a test/data/apps/shop --out test/data/out/dist/shop</span>

<span style="color: #008000"># Process single file</span>
<span style="color: #000000">hydrate -f test/data/apps/shop/app.config.yaml --out test/data/out/dist/shop</span>

<span style="color: #008000"># to turn off/on the console color  pass --consoleColor false/true respectively</span>
<span style="color: #000000">hydrate -r test/data/apps --out test/data/out/dist --colorConsole=false</span>
</code></pre>
				<p><strong><em>NOTE:</em></strong> if you are not installing globally, used the scripts like below instead:</p>
				<pre><code><span style="color: #001080">node_modules</span><span style="color: #000000">/.</span><span style="color: #001080">bin</span><span style="color: #000000">/</span><span style="color: #001080">hydrate</span><span style="color: #000000"> -</span><span style="color: #001080">r</span><span style="color: #000000"> </span><span style="color: #001080">test</span><span style="color: #000000">/</span><span style="color: #001080">data</span><span style="color: #000000">/</span><span style="color: #001080">apps</span><span style="color: #000000"> --</span><span style="color: #001080">out</span><span style="color: #000000"> </span><span style="color: #001080">test</span><span style="color: #000000">/</span><span style="color: #001080">data</span><span style="color: #000000">/</span><span style="color: #001080">out</span><span style="color: #000000">/</span><span style="color: #001080">dist</span>
<span style="color: #001080">node_modules</span><span style="color: #000000">/.</span><span style="color: #001080">bin</span><span style="color: #000000">/</span><span style="color: #001080">compare</span><span style="color: #000000">-</span><span style="color: #001080">json</span><span style="color: #000000"> </span><span style="color: #001080">test</span><span style="color: #000000">/</span><span style="color: #001080">data</span><span style="color: #000000">/.</span><span style="color: #001080">percyrc</span><span style="color: #000000"> </span><span style="color: #001080">test</span><span style="color: #000000">/</span><span style="color: #001080">data</span><span style="color: #000000">/</span><span style="color: #001080">modified</span><span style="color: #000000">.</span><span style="color: #001080">percyrc</span><span style="color: #000000"> --</span><span style="color: #001080">out</span><span style="color: #000000"> ./</span><span style="color: #001080">test</span><span style="color: #000000">/</span><span style="color: #001080">data</span><span style="color: #000000">/</span><span style="color: #001080">out</span><span style="color: #000000">/</span><span style="color: #001080">diff</span><span style="color: #000000">.</span><span style="color: #001080">html</span>
</code></pre>
				<a href="#configuration" id="configuration" style="color: inherit; text-decoration: none;">
					<h2>Configuration</h2>
				</a>
				<p>Main configuration file can be found at <code>config/default.js</code></p>
				<table>
					<thead>
						<tr>
							<th>Variable</th>
							<th>Description</th>
						</tr>
					</thead>
					<tbody><tr>
							<td>PERCY_LOG_LEVEL</td>
							<td></td>
						</tr>
						<tr>
							<td>PERCY_ENVIRONMENT_FILE_NAME</td>
							<td>Name of the environment file (default value: <code>environments.yaml</code>)</td>
						</tr>
						<tr>
							<td>PERCY_CONFIG_FILE_NAME</td>
							<td>Name of the percy configuration file (default value: <code>.percyrc</code>)</td>
						</tr>
						<tr>
							<td>PERCY_ENV_VARIABLE_NAME</td>
							<td>The YAML environment variable name (default value: <code>env</code>)</td>
						</tr>
						<tr>
							<td>PERCY_DEFAULT_ENV_IGNORE_PREFIX</td>
							<td>The prefix of env not to generate the config files (no default value)</td>
						</tr>
						<tr>
							<td>PERCY_DEFAULT_ENV_IGNORE_SUFFIX</td>
							<td>The suffix of env not to generate the config files (no default value)</td>
						</tr>
						<tr>
							<td>PERCY_DEFAULT_VARIABLE_PREFIX</td>
							<td>The YAML variable substitute prefix (default value: <code>_{</code>)</td>
						</tr>
						<tr>
							<td>PERCY_DEFAULT_VARIABLE_SUFFIX</td>
							<td>The YAML variable substitute suffix (default value: <code>}_</code>)</td>
						</tr>
						<tr>
							<td>PERCY_DEFAULT_VARIABLE_NAME_PREFIX</td>
							<td>The YAML variable name prefix (default value: <code>$</code>)</td>
						</tr>
						<tr>
							<td>PERCY_CONSOLE_COLORS</td>
							<td>The flag whether to colorize the console output or not</td>
						</tr>
				</tbody></table>
				<p>The app folder can contain optional <code>.percyrc</code> files, which provide repository-specific or application-specific configuration. The following properties are supported now:</p>
				<table>
					<thead>
						<tr>
							<th>Property</th>
							<th>Description</th>
						</tr>
					</thead>
					<tbody><tr>
							<td>envVariableName</td>
							<td>The YAML environment variable name</td>
						</tr>
						<tr>
							<td>variablePrefix</td>
							<td>The YAML variable substitute prefix</td>
						</tr>
						<tr>
							<td>variableSuffix</td>
							<td>The YAML variable substitute suffix</td>
						</tr>
						<tr>
							<td>variableNamePrefix</td>
							<td>The YAML variable name prefix</td>
						</tr>
						<tr>
							<td>envIgnorePrefix</td>
							<td>The prefix of env to ignore</td>
						</tr>
						<tr>
							<td>envIgnoreSuffix</td>
							<td>The suffix of env to ignore</td>
						</tr>
				</tbody></table>
				<p>If it&#39;s in the <code>apps</code> folder, the configuration applies to all applications, and if it&#39;s in the specific application folder, it only applies to the corresponding application. When provided, the default properties from the <code>config/default.js</code> will be overridden.</p>
				<p>Here is an example of <code>.percyrc</code> file:</p>
				<pre><code class="language-json"><span style="color: #000000">{</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;envVariableName&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;env&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;variablePrefix&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;{{&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;variableSuffix&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;}}&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;variableNamePrefix&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;_&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;envIgnorePrefix&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;_&quot;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #0451A5">&quot;envIgnoreSuffix&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;_&quot;</span>
<span style="color: #000000">}</span>
</code></pre>
				<a href="#installation-1" id="installation-1" style="color: inherit; text-decoration: none;">
					<h2>Installation</h2>
				</a>
				<pre><code class="language-bash"><span style="color: #008000"># Lint code</span>
<span style="color: #000000">$ npm run lint</span>

<span style="color: #008000"># Run unit tests with coverage</span>
<span style="color: #000000">$ npm run </span><span style="color: #795E26">test</span>
</code></pre>
				<a href="#usage-inside-the-lib" id="usage-inside-the-lib" style="color: inherit; text-decoration: none;">
					<h2>Usage inside the lib</h2>
				</a>
				<a href="#compare-json-1" id="compare-json-1" style="color: inherit; text-decoration: none;">
					<h3>compare-json</h3>
				</a>
				<p>Script for comparing two json files and outputting their differences to stdout</p>
				<p><code>npm run compare-json &lt;path/to/file.json&gt; &lt;path/to/file.json&gt;</code></p>
				<pre><code class="language-bash"><span style="color: #008000"># Example</span>
<span style="color: #000000">$ npm run compare-json test/data/.percyrc test/data/modified.percyrc</span>

<span style="color: #008000"># To generate HTML report</span>
<span style="color: #000000">$ npm run compare-json test/data/.percyrc test/data/modified.percyrc -- --out ./test/data/out/diff.html</span>

</code></pre>
				<a href="#hydrate-1" id="hydrate-1" style="color: inherit; text-decoration: none;">
					<h3>hydrate</h3>
				</a>
				<p>Script for processing YAML configuration files and converting it to environment specific JSON configuration</p>
				<p><code>npm run hydrate -- &lt; --root | --app | --file &gt; &lt;path/to/input&gt; --out &lt;path/to/output&gt;</code></p>
				<p>It provides three options</p>
				<ul>
					<li><code>--root</code> <code>-r</code> for processing all apps in a root directory</li>
					<li><code>--app</code> <code>-a</code> for processing a single app directory</li>
					<li><code>--file</code> <code>-f</code> for processing a single file
					You should specify one of these three options.</li>
				</ul>
				<pre><code class="language-bash"><span style="color: #008000"># Examples</span>

<span style="color: #008000"># Process all apps</span>
<span style="color: #000000">$ npm run hydrate -- -r test/data/apps --out test/data/out/dist</span>

<span style="color: #008000"># Process single app</span>
<span style="color: #000000">$ npm run hydrate -- -a test/data/apps/shop --out test/data/out/dist/shop</span>

<span style="color: #008000"># Process single file</span>
<span style="color: #000000">$ npm run hydrate -- -f test/data/apps/shop/app.config.yaml --out test/data/out/dist/shop</span>

</code></pre>
				<a href="#run-with-compiled-js-better-performance" id="run-with-compiled-js-better-performance" style="color: inherit; text-decoration: none;">
					<h2>Run with compiled JS (better performance)</h2>
				</a>
				<p>You can compiled the ts files to js, by running:</p>
				<pre><code><span style="color: #001080">$</span><span style="color: #000000"> </span><span style="color: #001080">npm</span><span style="color: #000000"> </span><span style="color: #001080">run</span><span style="color: #000000"> </span><span style="color: #001080">tsc</span>
</code></pre>
				<p>then run the js files using these script:</p>
				<pre><code class="language-bash"><span style="color: #008000"># hydrate Examples</span>

<span style="color: #008000"># Process all apps</span>
<span style="color: #000000">$ npm run hydrate.js -- -r test/data/apps --out test/data/out/dist</span>

<span style="color: #008000"># Process single app</span>
<span style="color: #000000">$ npm run hydrate.js -- -a test/data/apps/shop --out test/data/out/dist/shop</span>

<span style="color: #008000"># Process single file</span>
<span style="color: #000000">$ npm run hydrate.js -- -f test/data/apps/shop/app.config.yaml --out test/data/out/dist/shop</span>

<span style="color: #008000"># compare-json Example</span>
<span style="color: #000000">$ npm run compare-json.js test/data/.percyrc test/data/modified.percyrc</span>

<span style="color: #008000"># To generate HTML report</span>
<span style="color: #000000">$ npm run compare-json.js test/data/.percyrc test/data/modified.percyrc -- --out ./test/data/out/diff.html</span>

</code></pre>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/common_logger.html">common/logger</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/common_utils.html">common/utils</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/compare_json_lib.html">compare-<wbr>json.lib</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/hydrate_lib.html">hydrate.lib</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/interfaces_iappconfig_interface.html">interfaces/IApp<wbr>Config.interface</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/interfaces_ipercyconfig_interface.html">interfaces/IPercy<wbr>Config.interface</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>